<%- include('./shared/header') %> 
<main class="container mx-auto px-4 py-12 mt-14">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Breadcrumb & Welcome -->
        <div class="flex justify-between items-center mb-8">
            <nav class="flex space-x-2 text-sm text-gray-500">
                <a href="/" class="hover:text-gray-900">Home</a>
                <span>/</span>
                <span class="text-gray-900">My Account</span>
            </nav>
            <div class="flex items-center space-x-4">
                <div class="text-sm">
                    Welcome! <span class="text-red-500 dark:text-red-400">Md Rimel</span>
                </div>

                <!-- Dark Mode Toggle Button -->
                <button id="darkModeToggle" class="p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition">
                    <i id="darkModeIcon" class="bi bi-moon text-gray-700 dark:text-gray-300 text-lg"></i>
                </button>
            </div>
        </div>

        <div >
            

            <!-- Main Content -->
            <main class="md:col-span-3">
                <div class="bg-white p-6 rounded-lg shadow-sm">
                    <h1 class="text-2xl font-semibold text-red-500 mb-6">Edit Your Profile</h1>
                    
                    <form class="space-y-6" id="userForm">
                        <!-- Name Fields -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="space-y-2">
                                <label class="block text-sm font-medium text-gray-700">First Name</label>
                                <input type="text" id="firstName" value="Md" class="w-full p-2 border rounded-md bg-gray-50">
                                <div id="firstNameError" class="text-red-500 text-sm hidden"></div>
                            </div>
                            <div class="space-y-2">
                                <label class="block text-sm font-medium text-gray-700">Last Name</label>
                                <input type="text" id="lastName" value="Rimel" class="w-full p-2 border rounded-md bg-gray-50">
                                <div id="lastNameError" class="text-red-500 text-sm hidden"></div>
                            </div>
                        </div>
                    
                        <!-- Email & Address -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="space-y-2">
                                <label class="block text-sm font-medium text-gray-700">Email</label>
                                <input type="email" id="email" value="rimel1111@gmail.com" class="w-full p-2 border rounded-md bg-gray-50">
                                <div id="emailError" class="text-red-500 text-sm hidden"></div>
                            </div>
                            <div class="space-y-2">
                                <label class="block text-sm font-medium text-gray-700">Address</label>
                                <input type="text" id="address" value="Kingston, 5236, United State" class="w-full p-2 border rounded-md bg-gray-50">
                                <div id="addressError" class="text-red-500 text-sm hidden"></div>
                            </div>
                        </div>
                    
                        <!-- Password Changes -->
                        <div class="space-y-4">
                            <h2 class="font-medium">Password Changes (Leave blank to keep existing password)</h2>
                            <div class="space-y-4">
                                <input type="password" id="currentPassword" placeholder="Current Password" class="w-full p-2 border rounded-md bg-gray-50">
                                <div id="currentPasswordError" class="text-red-500 text-sm hidden"></div>
                                
                                <input type="password" id="newPassword" placeholder="New Password" class="w-full p-2 border rounded-md bg-gray-50">
                                <div id="newPasswordError" class="text-red-500 text-sm hidden"></div>
                                
                                <input type="password" id="confirmPassword" placeholder="Confirm New Password" class="w-full p-2 border rounded-md bg-gray-50">
                                <div id="confirmPasswordError" class="text-red-500 text-sm hidden"></div>
                            </div>
                        </div>
                    
                        <!-- Action Buttons -->
                        <div class="flex justify-end space-x-4">
                            <button type="button" class="px-4 py-2 text-sm text-gray-600 hover:text-gray-900">
                                Cancel
                            </button>
                            <button type="submit" class="px-4 py-2 text-sm text-white bg-red-500 rounded-md hover:bg-red-600">
                                Save Changes
                            </button>
                        </div>
                    </form> 
                </div>
            </main>
        </div>
    </div>
</main>
<!-- JavaScript Validation -->
<script>

document.addEventListener("DOMContentLoaded", function () {
        const darkModeToggle = document.getElementById("darkModeToggle");
        const darkModeIcon = document.getElementById("darkModeIcon");

        // Check for saved user preference in localStorage
        if (localStorage.getItem("darkMode") === "enabled") {
            document.documentElement.classList.add("dark");
            darkModeIcon.classList.replace("bi-moon", "bi-sun");
        }

        darkModeToggle.addEventListener("click", function () {
            if (document.documentElement.classList.contains("dark")) {
                document.documentElement.classList.remove("dark");
                darkModeIcon.classList.replace("bi-sun", "bi-moon");
                localStorage.setItem("darkMode", "disabled");
            } else {
                document.documentElement.classList.add("dark");
                darkModeIcon.classList.replace("bi-moon", "bi-sun");
                localStorage.setItem("darkMode", "enabled");
            }
        });
    });

    document.getElementById("userForm").addEventListener("submit", function (event) {
        event.preventDefault(); // Prevent form submission

        let isValid = true;

        // Get form elements
        const firstName = document.getElementById("firstName");
        const lastName = document.getElementById("lastName");
        const email = document.getElementById("email");
        const address = document.getElementById("address");

        const currentPassword = document.getElementById("currentPassword");
        const newPassword = document.getElementById("newPassword");
        const confirmPassword = document.getElementById("confirmPassword");

        // Get error divs
        const firstNameError = document.getElementById("firstNameError");
        const lastNameError = document.getElementById("lastNameError");
        const emailError = document.getElementById("emailError");
        const addressError = document.getElementById("addressError");

        const currentPasswordError = document.getElementById("currentPasswordError");
        const newPasswordError = document.getElementById("newPasswordError");
        const confirmPasswordError = document.getElementById("confirmPasswordError");

        // Clear previous errors
        firstNameError.classList.add("hidden");
        lastNameError.classList.add("hidden");
        emailError.classList.add("hidden");
        addressError.classList.add("hidden");

        currentPasswordError.classList.add("hidden");
        newPasswordError.classList.add("hidden");
        confirmPasswordError.classList.add("hidden");

        // Name validation
        if (firstName.value.trim() === "") {
            firstNameError.textContent = "First Name is required.";
            firstNameError.classList.remove("hidden");
            isValid = false;
        }
        if (lastName.value.trim() === "") {
            lastNameError.textContent = "Last Name is required.";
            lastNameError.classList.remove("hidden");
            isValid = false;
        }

        // Email validation
        const emailPattern = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/;
        if (!email.value.match(emailPattern)) {
            emailError.textContent = "Enter a valid email address.";
            emailError.classList.remove("hidden");
            isValid = false;
        }

        // Address validation
        if (address.value.trim() === "") {
            addressError.textContent = "Address is required.";
            addressError.classList.remove("hidden");
            isValid = false;
        }

        // Password validation (only if changing password)
        if (currentPassword.value.trim() !== "" || newPassword.value.trim() !== "" || confirmPassword.value.trim() !== "") {
            if (currentPassword.value.trim() === "") {
                currentPasswordError.textContent = "Enter your current password.";
                currentPasswordError.classList.remove("hidden");
                isValid = false;
            }
            if (newPassword.value.trim().length < 6) {
                newPasswordError.textContent = "New password must be at least 6 characters.";
                newPasswordError.classList.remove("hidden");
                isValid = false;
            }
            if (newPassword.value !== confirmPassword.value) {
                confirmPasswordError.textContent = "Passwords do not match.";
                confirmPasswordError.classList.remove("hidden");
                isValid = false;
            }
        }

        // If everything is valid, submit form
        if (isValid) {
            alert("Form submitted successfully!");
            // this.submit(); // Uncomment this to allow actual form submission
        }
    });
</script>

    <%- include('./shared/footer') %> 
