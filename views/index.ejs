<%- include('./shared/header') %>


  <!-- Hero Carousel Section -->
  <section class="relative w-full h-[90vh] mt-14 overflow-hidden">
    <div class="swiper default-carousel">
      <div class="swiper-wrapper">
        <% carouselSlides.forEach((slide)=> { %>
          <div class="swiper-slide">
            <div class="relative w-full h-[90vh] group">
              <img src="<%= slide.image %>"
                class="w-full h-full object-cover transition-all duration-1000 hover:scale-105 hover:border-4 hover:border-[var(--color-red-500)]"
                alt="Carousel Slide">
            </div>
          </div>
          <% }) %>
      </div>
      <!-- Navigation Buttons -->
      <button
        class="swiper-button-prev group absolute top-1/2 left-4 transform -translate-y-1/2 p-3 border border-[var(--color-red-500)] w-12 h-12 rounded-full hover:bg-[var(--color-red-500)] transition-all duration-300 z-20">
        <svg class="h-6 w-6 text-[var(--color-red-500)] group-hover:text-[var(--color-white)]"
          xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none">
          <path d="M10 12L6 8l4-4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"
            stroke-linejoin="round" />
        </svg>
      </button>
      <button
        class="swiper-button-next group absolute top-1/2 right-4 transform -translate-y-1/2 p-3 border border-[var(--color-red-500)] w-12 h-12 rounded-full hover:bg-[var(--color-red-500)] transition-all duration-300 z-20">
        <svg class="h-6 w-6 text-[var(--color-red-500)] group-hover:text-[var(--color-white)]"
          xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="none">
          <path d="M6 4l4 4-4 4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"
            stroke-linejoin="round" />
        </svg>
      </button>
      <div class="swiper-pagination absolute bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-2 z-20">
        <span
          class="swiper-pagination-bullet w-3 h-3 bg-[var(--color-red-500)] opacity-50 hover:opacity-100 transition-opacity duration-300"></span>
        <span
          class="swiper-pagination-bullet w-3 h-3 bg-[var(--color-red-500)] opacity-50 hover:opacity-100 transition-opacity duration-300"></span>
        <span
          class="swiper-pagination-bullet w-3 h-3 bg-[var(--color-red-500)] opacity-50 hover:opacity-100 transition-opacity duration-300"></span>
      </div>
    </div>
  </section>



  <!-- Product Category Sections with Cards -->
  <% Object.keys(categorizedProducts).forEach(category=> { %>
    <section class="p-4 md:px-16 mt-8">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-2">
          <div class="w-2 h-6 bg-[var(--color-red-500)] rounded"></div>
          <p class="text-[var(--color-red-500)] font-semibold">
            <%= category %>
          </p>
        </div>
      </div>
      <div class="flex items-center justify-between flex-col md:flex-row">
        <h2 class="text-3xl font-bold text-center md:text-left">
          <%= category.replace(/-/g, ' ' ) %>
        </h2>
        <div class="flex md:justify-end justify-center items-center mt-4 space-x-4 mr-4">
          <button class="slider-button left-button bg-[var(--color-gray-50)] p-3 rounded-full transition duration-300">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
              class="bi bi-arrow-left text-[var(--color-red-500)]" viewBox="0 0 16 16">
              <path fill-rule="evenodd"
                d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 0 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8" />
            </svg>
          </button>
          <button class="slider-button right-button bg-[var(--color-gray-50)] p-3 rounded-full transition duration-300">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
              class="bi bi-arrow-right text-[var(--color-red-500)]" viewBox="0 0 16 16">
              <path fill-rule="evenodd"
                d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8" />
            </svg>
          </button>
        </div>
      </div>
      <div class="relative ">
        <div class="slider-container flex overflow-x-scroll scrollbar-hide space-x-6 p-4 mt-6 mb-8">
          <% categorizedProducts[category].forEach(product=> { %>
            <div
              class="bg-[var(--color-white)] h-[28rem] md:w-72 w-64 flex-shrink-0 relative group overflow-hidden rounded-lg shadow-lg transition-all duration-500 hover:scale-105">
              <div class="relative h-2/3 w-full">
                <img src="<%= product.image %>" alt="<%= product.name %>"
                  class="h-full w-full object-cover rounded-t-lg transition-opacity duration-500 group-hover:opacity-80">
                <div
                  class="absolute inset-0 flex items-center justify-center gap-3 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
                  <button
                    class="wishlist-btn p-2 bg-[var(--color-white)] text-[var(--color-red-500)] rounded-full shadow hover:bg-[var(--color-red-500)] hover:text-[var(--color-white)] transition-all duration-300"
                    data-product-id="<%= product._id %>" data-wishlist="false">
                    <i class="bi bi-heart"></i>
                  </button>
                  <button class="quick-view-btn p-2 bg-[var(--color-white)] text-[var(--color-red-500)] rounded-full shadow hover:bg-[var(--color-red-500)] hover:text-[var(--color-white)] transition-all duration-300" data-name="<%= product.name %>" data-image="<%= product.image %>" data-price="<%= product.price %>" data-discountprice="<%= product.discountPrice %>" data-description="<%= product.description || 'No description available.' %>" data-product-id="<%= product._id %>">
                    <i class="bi bi-eye"></i>
                  </button>

                  <button
                    class="add-to-cart-btn p-2 bg-[var(--color-white)] text-[var(--color-red-500)] rounded-full shadow hover:bg-[var(--color-red-500)] hover:text-[var(--color-white)] transition-all duration-300"
                    data-product-id="<%= product._id %>" data-cart="false">
                    <i class="bi bi-cart"></i>
                  </button>
                </div>
              </div>
              <div
                class="p-4 h-1/3 flex flex-col justify-between bg-gradient-to-t from-[var(--color-gray-50)] to-[var(--color-white)]">
                <h3 class="font-semibold text-base truncate">
                  <%= product.name %>
                </h3>
                <div class="flex justify-between items-center">
                  <div class="flex items-center gap-2">
                    <span class="font-bold text-[var(--color-red-500)] text-lg">Rs <%= product.price %></span>
                    <span class="text-sm text-[var(--color-gray-400)] line-through">Rs <%= product.discountPrice %>
                        </span>
                  </div>
                </div>
              </div>
            </div>
            <% }); %>
        </div>
      </div>
    </section>
    <% }); %>


    <!-- Quick View Modal (Updated Design) -->
<div id="quickViewModal"
class="fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center opacity-0 pointer-events-none transition-all duration-500 z-50">
<div
  class="bg-[var(--color-white)] w-full max-w-[32rem] md:max-w-[40rem] p-8 rounded-xl shadow-2xl relative transform scale-95 transition-all duration-300">
  <!-- Close Button -->
  <button onclick="closeQuickView()"
    class="absolute top-4 right-4 w-10 h-10 bg-[var(--color-red-500)] text-[var(--color-white)] rounded-full flex items-center justify-center hover:bg-[var(--color-red-700)] transition-all duration-300">
    <i class="bi bi-x-lg text-xl"></i>
  </button>

  <!-- Product Content -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Product Image -->
    <div>
      <img id="modalProductImage" src="" alt="Product" class="w-full h-80 object-cover rounded-lg">
    </div>

    <!-- Product Details -->
    <div class="flex flex-col justify-between">
      <div>
        <h3 id="modalProductName" class="text-2xl font-bold text-[var(--color-black)] mb-4"></h3>
        <div class="flex items-center gap-4 mb-4">
          <span id="modalProductPrice" class="text-xl font-semibold text-[var(--color-red-500)]"></span>
          <span id="modalProductOldPrice" class="text-base text-[var(--color-gray-400)] line-through"></span>
        </div>
        <p id="modalProductDesc" class="text-[var(--color-gray-600)] text-sm leading-relaxed"></p>
      </div>
      <!-- Action Buttons -->
      <div class="mt-6 flex gap-4">
        <button
          class="wishlist-btn p-3 bg-[var(--color-white)] text-[var(--color-red-500)] border border-[var(--color-red-500)] rounded-full hover:bg-[var(--color-red-500)] hover:text-[var(--color-white)] transition-all duration-300"
          data-wishlist="false">
          <i class="bi bi-heart"></i>
        </button>
        <button
          class="add-to-cart-btn-modal flex-1 py-3 bg-[var(--color-red-500)] text-[var(--color-white)] font-semibold rounded-full hover:bg-[var(--color-red-700)] transition-all duration-300">
          Add to Cart
        </button>
      </div>
    </div>
  </div>
</div>
</div>
      <%- include('./shared/footer') %>


        <script>
          document.addEventListener("DOMContentLoaded", function () {
            document.querySelectorAll(".quick-view-btn").forEach(button => {
              button.addEventListener("click", function () {
                const modal = document.getElementById("quickViewModal");
                const productName = document.getElementById("modalProductName");
                const productImage = document.getElementById("modalProductImage");
                const productPrice = document.getElementById("modalProductPrice");
                const productOldPrice = document.getElementById("modalProductOldPrice");
                const productDesc = document.getElementById("modalProductDesc");

                // Update modal content using data attributes
                productName.innerText = this.getAttribute("data-name");
                productImage.src = this.getAttribute("data-image");
                productPrice.innerText = `Rs : ${this.getAttribute("data-price")}`;
                productOldPrice.innerText = `Rs : ${this.getAttribute("data-discountprice")}`;
                productDesc.innerText = this.getAttribute("data-description");

                // Show the modal
                modal.classList.remove("opacity-0", "pointer-events-none");
                modal.classList.add("opacity-100", "pointer-events-auto");
              });
            });
          });

          function closeQuickView() {
            const modal = document.getElementById("quickViewModal");
            modal.classList.remove("opacity-100", "pointer-events-auto");
            modal.classList.add("opacity-0", "pointer-events-none");
          }


        </script>





        



        <script>

          let swiper = new Swiper(".default-carousel", {
            loop: true, // Enables infinite loop
            autoplay: {
              delay: 4000, // Auto-slide every 3 seconds
              disableOnInteraction: false,
            },
            pagination: {
              el: ".swiper-pagination",
              clickable: true,
            },
            navigation: {
              nextEl: ".swiper-button-next",
              prevEl: ".swiper-button-prev",
            },
          });

          // Select all left and right buttons
          const leftButtons = document.querySelectorAll('.left-button');
          const rightButtons = document.querySelectorAll('.right-button');
          const sliders = document.querySelectorAll('.slider-container');

          // Loop through all left and right buttons and add event listeners
          leftButtons.forEach((button, index) => {
            button.addEventListener('click', function () {
              sliders[index].scrollBy({ left: -300, behavior: 'smooth' });
            });
          });

          rightButtons.forEach((button, index) => {
            button.addEventListener('click', function () {
              sliders[index].scrollBy({ left: 300, behavior: 'smooth' });
            });
          });


        </script>



        <!-- Link the JavaScript file -->
        <!-- <script type="module" src="/js/wishlist.js"></script> -->

        <!-- <script type="module" src="/js/addCart.js"></script> -->

        <script type="module" src="/js/search.js"></script>