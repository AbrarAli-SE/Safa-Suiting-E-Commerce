<%- include('./shared/header') %>

<!-- Hero Carousel Section - Design 3 -->
<section class="relative w-full h-[90vh] mt-16 overflow-hidden carousel-design-3 sm:h-[87vh] sm:mt-[4.5rem]">
  <div class="swiper thumbnail-carousel">
    <div class="swiper-wrapper">
      <% carouselSlides.forEach((slide) => { %>
        <div class="swiper-slide">
          <div class="relative w-full h-[90vh] md:h-[87vh]">
            <img src="<%= slide.image %>" class="w-full h-full object-cover" alt="Carousel Slide">
          </div>
        </div>
      <% }) %>
    </div>
    <!-- Thumbnail Pagination -->
    <div class="absolute bottom-10 left-1/2 -translate-x-1/2 flex space-x-4 z-20">
      <% carouselSlides.forEach((slide, index) => { %>
        <div class="swiper-thumbnail w-16 h-16 rounded-full overflow-hidden cursor-pointer border-2 border-[var(--color-red-500)]" data-slide="<%= index %>">
          <img src="<%= slide.image %>" class="w-full h-full object-cover" alt="Thumbnail">
        </div>
      <% }) %>
    </div>
  </div>
</section>








<!-- Product Category Sections with Cards -->
<% Object.keys(categorizedProducts).forEach(category => { %>
  <section class="p-4 md:px-16 mt-8">
    <div class="flex items-center justify-between">
      <div class="flex items-center gap-2">
        <div class="w-2 h-6 bg-[var(--color-red-500)] rounded"></div>
        <p class="text-[var(--color-red-500)] font-semibold">
          <%= category %>
        </p>
      </div>
    </div>
    <div class="flex items-center justify-between flex-col md:flex-row">
      <h2 class="text-3xl font-bold text-center md:text-left">
        <%= category.replace(/-/g, ' ') %>
      </h2>
      <div class="flex md:justify-end justify-center items-center mt-4 space-x-4 mr-4">
        <button class="slider-button left-button bg-[var(--color-gray-50)] p-3 rounded-full transition duration-300">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
            class="bi bi-arrow-left text-[var(--color-red-500)]" viewBox="0 0 16 16">
            <path fill-rule="evenodd"
              d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 0 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8" />
          </svg>
        </button>
        <button class="slider-button right-button bg-[var(--color-gray-50)] p-3 rounded-full transition duration-300">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
            class="bi bi-arrow-right text-[var(--color-red-500)]" viewBox="0 0 16 16">
            <path fill-rule="evenodd"
              d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8" />
          </svg>
        </button>
      </div>
    </div>
    <div class="relative">
      <div class="slider-container flex overflow-x-scroll scrollbar-hide space-x-6 p-4 mt-6 mb-8 snap-x snap-mandatory">
        <% categorizedProducts[category].forEach(product => { %>
          <div
            class="bg-[var(--color-white)] h-[28rem] md:w-72 w-64 flex-shrink-0 relative group overflow-hidden rounded-lg shadow-lg transition-all duration-500 hover:scale-105 snap-center">
            <div class="relative h-2/3 w-full">
              <img src="<%= product.image %>" alt="<%= product.name %>"
                class="h-full w-full object-cover rounded-t-lg transition-opacity duration-500 group-hover:opacity-80 md:group-hover:opacity-80">
              <!-- Hover Buttons (Visible only on md and larger screens) -->
              <div
                class="absolute inset-0 flex items-center justify-center gap-3 opacity-0 md:group-hover:opacity-100 transition-opacity duration-500 hidden md:flex">
                <button
                  class="wishlist-btn p-2 bg-[var(--color-white)] text-[var(--color-red-500)] rounded-full shadow hover:bg-[var(--color-red-500)] hover:text-[var(--color-white)] transition-all duration-300"
                  data-product-id="<%= product._id %>" data-wishlist="false">
                  <i class="bi bi-heart"></i>
                </button>
                <button
                  class="quick-view-btn p-2 bg-[var(--color-white)] text-[var(--color-red-500)] rounded-full shadow hover:bg-[var(--color-red-500)] hover:text-[var(--color-white)] transition-all duration-300"
                  data-name="<%= product.name %>" data-image="<%= product.image %>" data-price="<%= product.price %>"
                  data-discountprice="<%= product.discountPrice %>" data-description="<%= product.description || 'No description available.' %>"
                  data-product-id="<%= product._id %>">
                  <i class="bi bi-eye"></i>
                </button>
                <button
                  class="add-to-cart-btn p-2 bg-[var(--color-white)] text-[var(--color-red-500)] rounded-full shadow hover:bg-[var(--color-red-500)] hover:text-[var(--color-white)] transition-all duration-300"
                  data-product-id="<%= product._id %>" data-cart="false">
                  <i class="bi bi-cart"></i>
                </button>
              </div>
            </div>
            <div
              class="p-4 h-1/3 flex flex-col justify-between bg-gradient-to-t from-[var(--color-gray-50)] to-[var(--color-white)]">
              <h3 class="font-semibold text-base truncate">
                <%= product.name %>
              </h3>
              <div class="flex justify-between items-center">
                <div class="flex items-center gap-2">
                  <span class="font-bold text-[var(--color-red-500)] text-lg">Rs <%= product.price %></span>
                  <span class="text-sm text-[var(--color-gray-400)] line-through">Rs <%= product.discountPrice %></span>
                </div>
              </div>
              <!-- Mobile Buttons (Visible only on mobile screens) -->
              <div class="flex justify-between items-center gap-2 mt-2 md:hidden">
                <button
                  class="wishlist-btn flex-1 p-2 bg-[var(--color-white)] text-[var(--color-red-500)] rounded-full shadow hover:bg-[var(--color-red-500)] hover:text-[var(--color-white)] transition-all duration-300"
                  data-product-id="<%= product._id %>" data-wishlist="false">
                  <i class="bi bi-heart"></i>
                </button>
                <button
                  class="quick-view-btn flex-1 p-2 bg-[var(--color-white)] text-[var(--color-red-500)] rounded-full shadow hover:bg-[var(--color-red-500)] hover:text-[var(--color-white)] transition-all duration-300"
                  data-name="<%= product.name %>" data-image="<%= product.image %>" data-price="<%= product.price %>"
                  data-discountprice="<%= product.discountPrice %>" data-description="<%= product.description || 'No description available.' %>"
                  data-product-id="<%= product._id %>">
                  <i class="bi bi-eye"></i>
                </button>
                <button
                  class="add-to-cart-btn flex-1 p-2 bg-[var(--color-white)] text-[var(--color-red-500)] rounded-full shadow hover:bg-[var(--color-red-500)] hover:text-[var(--color-white)] transition-all duration-300"
                  data-product-id="<%= product._id %>" data-cart="false">
                  <i class="bi bi-cart"></i>
                </button>
              </div>
            </div>
          </div>
        <% }); %>
      </div>
    </div>
  </section>
<% }); %>

<!-- Quick View Modal (Unchanged) -->
<div id="quickViewModal"
  class="fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center opacity-0 pointer-events-none transition-all duration-500 z-50">
  <div
    class="bg-[var(--color-white)] w-full max-w-[32rem] md:max-w-[40rem] p-8 rounded-xl shadow-2xl relative transform scale-95 transition-all duration-300">
    <button onclick="closeQuickView()"
      class="absolute top-4 right-4 w-10 h-10 bg-[var(--color-red-500)] text-[var(--color-white)] rounded-full flex items-center justify-center hover:bg-[var(--color-red-700)] transition-all duration-300">
      <i class="bi bi-x-lg text-xl"></i>
    </button>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <img id="modalProductImage" src="" alt="Product" class="w-full h-80 object-cover rounded-lg">
      </div>
      <div class="flex flex-col justify-between">
        <div>
          <h3 id="modalProductName" class="text-2xl font-bold text-[var(--color-black)] mb-4"></h3>
          <div class="flex items-center gap-4 mb-4">
            <span id="modalProductPrice" class="text-xl font-semibold text-[var(--color-red-500)]"></span>
            <span id="modalProductOldPrice" class="text-base text-[var(--color-gray-400)] line-through"></span>
          </div>
          <p id="modalProductDesc" class="text-[var(--color-gray-600)] text-sm leading-relaxed"></p>
        </div>
        <div class="mt-6 flex flex-col md:flex-row gap-3 md:gap-4">
          <button class="wishlist-btn-modal w-full md:w-auto p-2 md:p-3 bg-[var(--color-white)] text-[var(--color-red-500)] border border-[var(--color-red-500)] rounded-full hover:bg-[var(--color-red-500)] hover:text-[var(--color-white)] transition-all duration-300">
            <i class="bi bi-heart"></i>
          </button>
          <button
            class="add-to-cart-btn-modal w-full md:flex-1 py-2 md:py-3 bg-[var(--color-red-500)] text-[var(--color-white)] font-semibold rounded-full hover:bg-[var(--color-red-700)] transition-all duration-300">
            Add to Cart
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('./shared/footer') %>
<script type="module" src="/js/addCart.js"></script>



