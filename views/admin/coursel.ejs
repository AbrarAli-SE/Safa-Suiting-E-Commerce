<%- include('../shared/asideBar') %>


<main class="flex-grow p-8 ml-0 sm:ml-20 lg:ml-64 overflow-hidden">
  <h1 class="text-4xl font-bold mb-8 sm:mt-7 mt-9">Update Carousel</h1>

  <!-- ✅ Upload Form -->
  <section class="mb-8">
      <h2 class="text-2xl font-semibold mb-4">Manage Carousel</h2>
      <form id="carousel-form" action="/admin/carousel/upload" method="POST" enctype="multipart/form-data">
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
            <div>
                <label class="block text-lg font-semibold mb-2">Image 1</label>
                <input type="file" name="images" class="border p-2 w-full" accept="image/*" multiple required />
            </div>
        </div>
        <button type="submit" class="px-6 py-2 bg-red-500 hover:bg-red-600 transition text-white rounded">
            Upload Slider
        </button>
    </form>
    
  </section>

  <!-- ✅ Preview Carousel -->
  <section class="mb-8">
      <h2 class="text-2xl font-semibold mb-4">Image Slider</h2>
      <div class="swiper default-carousel swiper-container">
          <div class="swiper-wrapper" id="adminCarouselImages">
              <!-- Images will be dynamically loaded here -->
          </div>
      </div>
      <div class="swiper-pagination"></div>
  </section>
</main>

<script>
  async function loadAdminCarouselImages() {
      const res = await fetch("/admin/carousel/get");
      const data = await res.json();
      const carouselContainer = document.getElementById("adminCarouselImages");

      if (data.success) {
          carouselContainer.innerHTML = data.images
              .map(img => `
                  <div class="swiper-slide">
                      <img src="${img}" class="w-full h-[80vh] object-cover">
                  </div>
              `)
              .join("");
      }
  }

  document.addEventListener("DOMContentLoaded", loadAdminCarouselImages);
</script>



<script>
  document.addEventListener("DOMContentLoaded", function () {
    var swiper = new Swiper(".default-carousel", {
      loop: true, // Enables infinite loop
      autoplay: {
        delay: 3000, // Auto-slide every 3 seconds
        disableOnInteraction: false,
      },
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
      },
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
      },
      slidesPerView: 1,
      spaceBetween: 10,
    });
  });
</script>

     <!-- Link the JavaScript file -->
     <script src="/js/main.js"></script>
</body>

</html>