<%- include('../shared/asideBar') %>

<main class="flex-grow p-8 ml-0 sm:ml-20 lg:ml-64 overflow-hidden">
    <h1 class="text-4xl font-bold mb-8 sm:mt-7 mt-9">Contact Submissions</h1>

    <% if (contacts.length === 0) { %>
        <p class="text-gray-500 text-center">No contact submissions found.</p>
    <% } else { %>
        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
            <div class="overflow-x-auto">
                <table class="min-w-full table-auto">
                    <thead class="bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300">
                        <tr>
                            <th class="px-4 py-2 text-left">Name</th>
                            <th class="px-4 py-2 text-left">Email</th>
                            <th class="px-4 py-2 text-left">Phone</th>
                            <th class="px-4 py-2 text-left">Message</th>
                            <th class="px-4 py-2 text-left">Date</th>
                        </tr>
                    </thead>
                    <tbody class="text-gray-700 dark:text-gray-300">
                        <% contacts.forEach(contact => { %>
                            <tr class="border-t border-gray-200 dark:border-gray-600">
                                <td class="px-4 py-2"><%= contact.name %></td>
                                <td class="px-4 py-2"><%= contact.email %></td>
                                <td class="px-4 py-2"><%= contact.phone %></td>
                                <td class="px-4 py-2"><%= contact.message %></td>
                                <td class="px-4 py-2"><%= contact.createdAt.toLocaleString() %></td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
        </div>
         <!-- âœ… Pagination Controls -->
         <div class="flex justify-center mt-6">
            <% if (currentPage > 1) { %>
                <a href="/admin/contacts?page=<%= currentPage - 1 %>"
                   class="px-4 py-2 border rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-white mx-2">
                   Previous
                </a>
            <% } %>

            <span class="px-4 py-2 border rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-white">
                Page <%= currentPage %> of <%= totalPages %>
            </span>

            <% if (currentPage < totalPages) { %>
                <a href="/admin/contacts?page=<%= currentPage + 1 %>"
                   class="px-4 py-2 border rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-white mx-2">
                   Next
                </a>
            <% } %>
        </div>
    <% } %>
</main>
